<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="quanke, java" />





  <link rel="alternate" href="/atom.xml" title="全科-不安分的码农" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="全科-不安分的码农">
<meta property="og:url" content="http://quanke.name/page/8/index.html">
<meta property="og:site_name" content="全科-不安分的码农">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="全科-不安分的码农">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://quanke.name/page/8/"/>





  <title>全科-不安分的码农</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?853906ed403c461b2dbf1df696bdf998";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">全科-不安分的码农</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">android，ios，html5，微服务架构，XP，scrum，项目管理（PMP）</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/08/e9-9f-b3-e9-a2-91-e5-8e-8b-e7-bc-a9-e5-b7-a5-e5-85-b7-e2-80-94-e2-80-94speex-e7-9a-84-e4-bd-bf-e7-94-a8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/08/e9-9f-b3-e9-a2-91-e5-8e-8b-e7-bc-a9-e5-b7-a5-e5-85-b7-e2-80-94-e2-80-94speex-e7-9a-84-e4-bd-bf-e7-94-a8/" itemprop="url">音频压缩工具——Speex的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-08T04:13:24+08:00">
                2012-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/08/e9-9f-b3-e9-a2-91-e5-8e-8b-e7-bc-a9-e5-b7-a5-e5-85-b7-e2-80-94-e2-80-94speex-e7-9a-84-e4-bd-bf-e7-94-a8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/08/e9-9f-b3-e9-a2-91-e5-8e-8b-e7-bc-a9-e5-b7-a5-e5-85-b7-e2-80-94-e2-80-94speex-e7-9a-84-e4-bd-bf-e7-94-a8/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在Android开发中，需要录音并发送到对方设备上。这时问题来了，手机常会是GPRS、3G等方式上网，所以节省流量是非常关键的，使用Speex来压缩音频文件，可以将音频压文件小数倍。</p>
<p>1.去Speex官网下载最新Speex源码。</p>
<p>2.创建一个新的应用（我创建的应用名为Audio），并创建一个jni目录（$project/jni）。</p>
<p>3.把speex源码目录下的libspeex和include目录及其子目录文件全部拷贝到$project/jni目录下</p>
<p>[code lang=”java”]（$project/jni/libspeex and $project/jni/include）。<br>[/code]</p>
<p>4.在jni目录下新增Android.mk文件，编辑内容如下</p>
<p>[code lang=”java”]LOCAL_PATH := $(call my-dir)</p>
<p>include $(CLEAR_VARS)<br>&amp;nbsp;<br>LOCAL_MODULE &amp;nbsp; &amp;nbsp;:= libspeex<br>LOCAL_CFLAGS = -DFIXED_POINT -DUSE_KISS_FFT -DEXPORT=&quot;&quot; -UHAVE_CONFIG_H<br>LOCAL_C_INCLUDES := $(LOCAL_PATH)/include<br>&amp;nbsp;<br>LOCAL_SRC_FILES := &amp;nbsp;\<br>./speex_jni.cpp \<br>./libspeex/bits.c \<br>./libspeex/buffer.c \<br>./libspeex/cb_search.c \<br>./libspeex/exc_10_16_table.c \<br>./libspeex/exc_10_32_table.c \<br>./libspeex/exc_20_32_table.c \<br>./libspeex/exc_5_256_table.c \<br>./libspeex/exc_5_64_table.c \<br>./libspeex/exc_8_128_table.c \<br>./libspeex/fftwrap.c \<br>./libspeex/filterbank.c \<br>./libspeex/filters.c \<br>./libspeex/gain_table.c \<br>./libspeex/gain_table_lbr.c \<br>./libspeex/hexc_10_32_table.c \<br>./libspeex/hexc_table.c \<br>./libspeex/high_lsp_tables.c \<br>./libspeex/jitter.c \<br>./libspeex/kiss_fft.c \<br>./libspeex/kiss_fftr.c \<br>./libspeex/lpc.c \<br>./libspeex/lsp.c \<br>./libspeex/lsp_tables_nb.c \<br>./libspeex/ltp.c \<br>./libspeex/mdf.c \<br>./libspeex/modes.c \<br>./libspeex/modes_wb.c \<br>./libspeex/nb_celp.c \<br>./libspeex/preprocess.c \<br>./libspeex/quant_lsp.c \<br>./libspeex/resample.c \<br>./libspeex/sb_celp.c \<br>./libspeex/scal.c \<br>./libspeex/smallft.c \<br>./libspeex/speex.c \<br>./libspeex/speex_callbacks.c \<br>./libspeex/speex_header.c \<br>./libspeex/stereo.c \<br>./libspeex/vbr.c \<br>./libspeex/vq.c \<br>./libspeex/window.c<br>&amp;nbsp;<br>include $(BUILD_SHARED_LIBRARY)<br>[/code]</p>
<p>5.在jni目录下新增Application.mk文件，编辑内容如下</p>
<p>[code lang=”java”]<br>APP_ABI := armeabi armeabi-v7a<br>[/code]</p>
<p>6.在$project/jni/include/speex/目录下新增speex_config_types.h文件，编辑内容如下</p>
<p>[code lang=”java”]</p>
<p>#ifndef <strong>SPEEX_TYPES_H</strong></p>
<p>#define <strong>SPEEX_TYPES_H</strong><br>typedef short spx_int16_t;<br>typedef unsigned short spx_uint16_t;<br>typedef int spx_int32_t;<br>typedef unsigned int spx_uint32_t;</p>
<p>#endif<br>[/code]</p>
<p>7.创建JNI包装类speex_jni.cpp，用来调用Speex中的C代码函数，编辑内容如下</p>
<p>[code lang=”c”]#include &lt;jni.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include &lt;unistd.h&gt;</p>
<p>#include &lt;speex/speex.h&gt;</p>
<p>static int codec_open = 0;</p>
<p>static int dec_frame_size;<br>static int enc_frame_size;</p>
<p>static SpeexBits ebits, dbits;<br>void <em>enc_state;<br>void </em>dec_state;</p>
<p>static JavaVM *gJavaVM;</p>
<p>extern &quot;C&quot;<br>JNIEXPORT jint JNICALL Java_com_audio_Speex_open<br>  (JNIEnv *env, jobject obj, jint compression) {<br>    int tmp;</p>
<pre><code>if (codec_open++ != 0)
    return (jint)0;

speex_bits_init(&amp;amp;ebits);
speex_bits_init(&amp;amp;dbits);

enc_state = speex_encoder_init(&amp;amp;speex_nb_mode);
dec_state = speex_decoder_init(&amp;amp;speex_nb_mode);
tmp = compression;
speex_encoder_ctl(enc_state, SPEEX_SET_QUALITY, &amp;amp;tmp);
speex_encoder_ctl(enc_state, SPEEX_GET_FRAME_SIZE, &amp;amp;enc_frame_size);
speex_decoder_ctl(dec_state, SPEEX_GET_FRAME_SIZE, &amp;amp;dec_frame_size);

return (jint)0;
</code></pre><p>}</p>
<p>extern &quot;C&quot;<br>JNIEXPORT jint Java_com_audio_Speex_encode<br>    (JNIEnv *env, jobject obj, jshortArray lin, jint offset, jbyteArray encoded, jint size) {</p>
<pre><code>    jshort buffer[enc_frame_size];
    jbyte output_buffer[enc_frame_size];
int nsamples = (size-1)/enc_frame_size + 1;
int i, tot_bytes = 0;

if (!codec_open)
    return 0;

speex_bits_reset(&amp;amp;ebits);

for (i = 0; i &amp;lt; nsamples; i++) {
    env-&amp;gt;GetShortArrayRegion(lin, offset + i*enc_frame_size, enc_frame_size, buffer);
    speex_encode_int(enc_state, buffer, &amp;amp;ebits);
}
//env-&amp;gt;GetShortArrayRegion(lin, offset, enc_frame_size, buffer);
//speex_encode_int(enc_state, buffer, &amp;amp;ebits);

tot_bytes = speex_bits_write(&amp;amp;ebits, (char *)output_buffer,
                 enc_frame_size);
env-&amp;gt;SetByteArrayRegion(encoded, 0, tot_bytes,
            output_buffer);

    return (jint)tot_bytes;
</code></pre><p>}</p>
<p>extern &quot;C&quot;<br>JNIEXPORT jint JNICALL Java_com_audio_Speex_decode<br>    (JNIEnv *env, jobject obj, jbyteArray encoded, jshortArray lin, jint size) {</p>
<pre><code>    jbyte buffer[dec_frame_size];
    jshort output_buffer[dec_frame_size];
    jsize encoded_length = size;

if (!codec_open)
    return 0;

env-&amp;gt;GetByteArrayRegion(encoded, 0, encoded_length, buffer);
speex_bits_read_from(&amp;amp;dbits, (char *)buffer, encoded_length);
speex_decode_int(dec_state, &amp;amp;dbits, output_buffer);
env-&amp;gt;SetShortArrayRegion(lin, 0, dec_frame_size,
             output_buffer);

return (jint)dec_frame_size;
</code></pre><p>}</p>
<p>extern &quot;C&quot;<br>JNIEXPORT jint JNICALL Java_com_audio_getFrameSize<br>    (JNIEnv *env, jobject obj) {</p>
<pre><code>if (!codec_open)
    return 0;
return (jint)enc_frame_size;
</code></pre><p>}</p>
<p>extern &quot;C&quot;<br>JNIEXPORT void JNICALL Java_com_audio_Speex_close<br>    (JNIEnv *env, jobject obj) {</p>
<pre><code>if (--codec_open != 0)
    return;

speex_bits_destroy(&amp;amp;ebits);
speex_bits_destroy(&amp;amp;dbits);
speex_decoder_destroy(dec_state);
speex_encoder_destroy(enc_state);
</code></pre><p>}<br>[/code]</p>
<p>8.在Java层创建Speex工具类，内容如下</p>
<p>[code lang=”java”]package com.audio;</p>
<p>class Speex  {</p>
<pre><code>/* quality
 * 1 : 4kbps (very noticeable artifacts, usually intelligible)
 * 2 : 6kbps (very noticeable artifacts, good intelligibility)
 * 4 : 8kbps (noticeable artifacts sometimes)
 * 6 : 11kpbs (artifacts usually only noticeable with headphones)
 * 8 : 15kbps (artifacts not usually noticeable)
 */
private static final int DEFAULT_COMPRESSION = 8;

Speex() {
}

public void init() {
    load();    
    open(DEFAULT_COMPRESSION);
}

private void load() {
    try {
        System.loadLibrary(&amp;quot;speex&amp;quot;);
    } catch (Throwable e) {
        e.printStackTrace();
    }

}

public native int open(int compression);
public native int getFrameSize();
public native int decode(byte encoded[], short lin[], int size);
public native int encode(short lin[], int offset, byte encoded[], int size);
public native void close();
</code></pre><p>}<br>[/code]</p>
<p>9.打开cygwin工具，切换到项目目录（我项目是在F:\workspace\Audio），输入$NDK/ndk-build</p>
<p>cygwin工具的安装与配置，可以看这篇文章——<a href="http://blog.csdn.net/chenfeng0104/article/details/7090850" target="_blank" rel="external">使用NDK与环境搭建</a></p>
<p><img src="http://hi.csdn.net/attachment/201112/20/0_1324370946pF9v.gif" alt=""></p>
<p><img src="http://hi.csdn.net/attachment/201112/20/0_1324370960cCla.gif" alt=""></p>
<p>会在项目中生成libs目录和libspeex.so文件，这就是Speex类中System.loadLibrary(“speex”);代码引用的，系统会根据操作系统由”speex”找到对应的动态库libspeex.so，Windows下是.dll文件，linux下是.so文件。</p>
<p>当前，我的项目结构如下图</p>
<p><img src="http://hi.csdn.net/attachment/201112/20/0_1324371398RYMW.gif" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/08/android/android-e4-bd-bf-e7-94-a8ndk-e4-b8-8e-e7-8e-af-e5-a2-83-e6-90-ad-e5-bb-ba/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/08/android/android-e4-bd-bf-e7-94-a8ndk-e4-b8-8e-e7-8e-af-e5-a2-83-e6-90-ad-e5-bb-ba/" itemprop="url">android 使用NDK与环境搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-08T04:02:00+08:00">
                2012-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/08/android/android-e4-bd-bf-e7-94-a8ndk-e4-b8-8e-e7-8e-af-e5-a2-83-e6-90-ad-e5-bb-ba/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/08/android/android-e4-bd-bf-e7-94-a8ndk-e4-b8-8e-e7-8e-af-e5-a2-83-e6-90-ad-e5-bb-ba/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一、NDK介绍</p>
<p>使用NDK，并不会给我们程序提高执行性能，反而会使程序复杂化。因此，尽量避免使用NDK，除非你真的需要使用本地库（通常是C/C++库），不要因为擅长使用C/C++编程而使用NDK。</p>
<p>Android提供了两种使用本地代码的方式<br>1.通过JNI调用本地代码</p>
<p>2.通过<a href="http://developer.android.com/reference/android/app/NativeActivity.html" target="_blank" rel="external">NativeActivity类</a>调用本地代码（从2.3版本开始支持）</p>
<p>NDK 提供了一系列的工具，帮助开发者快速开发 C （或 C++ ）的动态库，并能自动将 so 和java 应用一起打包成 apk 。这些工具对开发者的帮助是巨大的。<br>NDK 集成了交叉编译器，并提供了相应的 mk 文件隔离 CPU 、平台、 ABI 等差异，开发人员只需要简单修改 mk 文件（指出 “ 哪些文件需要编译 ” 、 “ 编译特性要求 ” 等），就可以创建出 so 。 NDK 可以自动地将 so 和 Java 应用一起打包，极大地减轻了开发人员的打包工作 。 比较简单的说， NDK 是一套交叉编译工具，它可以帮你把你用 C 或 C++ 书写的代码，编译为 .so （类似与 win 下的 .dll ）格式的文件，使你可以在你的 Android 程序当中用 Java 语言（ JNI ）调用这些代码。</p>
<p>二：Windows平台安装cygwin<br>由于 NDK 编译代码时必须要用到 make 和 gcc ，所以你必须先搭建一个 linux 环境， cygwin 是一个在 windows 平台上运行的 unix 模拟环境 , 它对于学习 unix/linux 操作环境，或者从 unix 到 windows 的应用程序移植，非常有用。通过它，你就可以在不安装 linux 的情况下使用 NDK 来编译 C 、 C++ 代码了。下面我们一步一步的安装 cygwin 吧。<br>1.在cygwin主页<a href="http://www.cygwin.com/" target="_blank" rel="external">下载setup.exe</a></p>
<p>2.双击安装setup.exe</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324443486CEEE.gif" alt=""></p>
<p>3.选择安装目录</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324443511RQ1d.gif" alt=""></p>
<p>4.选择下载网址，<a href="http://mirrors.163.com比较快" target="_blank" rel="external">http://mirrors.163.com比较快</a></p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324443536h1Ne.gif" alt=""></p>
<p>5.安装向导提示是第一次安装，这个不用管它，直接点“确定”</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_132444360233tN.gif" alt=""></p>
<p>6.选择安装包，这里要把Devel包由Default改成Install</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324443866rmRZ.gif" alt=""></p>
<p>7.正在安装，时间有点长，估计要2个小时左右（根据网络而定）</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324443894UVMV.gif" alt=""></p>
<p>&nbsp;</p>
<p>8.测试cygwin是否安装好了<br>运行cygwin，在弹出的命令行窗口输入：cygcheck -c cygwin命令</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324443951xWCu.gif" alt=""></p>
<p>&nbsp;</p>
<p>三、配置NDK环境变量<br>1.在cygwin的安装目录，找到home\&lt;PC用户名&gt;.bash_profile文件（我是在C:\cygwin\home\user.bash_profile），有时候安装home目录下是空的，可以自行创建&lt;PC用户名&gt;目录，并将cygwin\etc\skel.bash_profile文件拷贝过来。<br>2.打开bash_profile文件，添加如下两行，例如：<br>NDK=/cygdrive/h/android-ndk-r7<br>export NDK</p>
<p>NDK这个名字可以随便取，路径格式为/cygdrive/&lt;你的盘符&gt;/&lt;android ndk 目录&gt;<br>注意：用某些编辑器编辑bash_profile文件，会导致问题，如用写字板、VC++6。可以用Uedit、UltraEdit的dos格式编辑</p>
<p>3.测试环境是否配置好了，打开cygwin，输入cd $NDK，出现/cygdrive/h/android-ndk-r7信息表示配置好了。如下图</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324444004BTXm.gif" alt=""></p>
<p>注意：如果第2步用写字板打开编辑bash_profile文件，输入cd $NDK时会显示no such file or directory，说明配置不成功<br>四、用NDK来编译程序<br>1.现在我们用安装好的NDK来编译一个简单的程序，我们选择ndk自带的例子hello-jni，我的位于H:\android-ndk-r7\samples\hello-jni(根据你具体的安装位置而定)，<br>2.运行cygwin，输入命令cd /cygdrive/h/android-ndk-r7/samples/hello-jni，进入到H:\android-ndk-r7\samples\hello-jni目录。<br>3.输入$NDK/ndk-build，执行成功后，它会自动生成一个libs目录，把编译生成的.so文件放在里面。($NDK是调用我们之前配置好的环境变量，ndk-build是调用ndk的编译程序)<br>4.此时去hello-jni的libs目录下看有没有生成的.so文件，如果有，你的ndk就运行正常了</p>
<p>五、在eclipse中集成c/c++开发环境<br>1.装Eclipse的C/C++环境插件：CDT，这里选择在线安装。<br>首先登录<a href="http://www.eclipse.org/cdt/downloads.php，找到对应你Eclipse版本的CDT插件的在线安装地址。" target="_blank" rel="external">http://www.eclipse.org/cdt/downloads.php，找到对应你Eclipse版本的CDT插件的在线安装地址。</a><br>2.然后点Help菜单，找到Install New Software菜单<br>3.点击Add按钮，把取的地址填进去，出来插件列表后，选Select All，然后选择下一步即可完成安装<br>4.安装完成后，在eclispe中右击新建一个项目，如果出现了c/c++项目，则表明你的CDT插件安装成功了</p>
<p>&nbsp;</p>
<p>六、配置C/C++的编译器<br>1.打开eclipse，导入ndk自带的hello-jni例子，右键单击项目名称，点击Properties，弹出配置界面，之后再点击Builders，弹出项目的编译工具列表，之后点击New，新添加一个编译器，点击后出现添加界面，选择Program，点击OK<br>2.出现了添加界面，首先给编译配置起个名字，如：C_Builder<br>设置Location为&lt;你cygwin安装路径&gt;\bin\bash.exe程序，例如：C:\cygwin\bin\bash.exe<br>设置Working Directory为&lt;你cygwin安装路径&gt;\bin目录，例如：C:\cygwin\bin<br>设置Arguments为  –login -c “cd /cygdrive/F/workspace/hello-jni &amp;&amp; $NDK/ndk-build”</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324444100zLFY.gif" alt=""></p>
<p>上面的配置中 /cygdrive/F/workspace/hello-jni是你当前要编译的程序的目录，$NDK是之前配置的ndk的环境变量，这两个根据你具体的安装目录进行配置，其他的不用变，Arguments这串参数实际是  给bash.exe命令行程序传参数，进入要编译的程序目录，然后运行ndk-build编译程序</p>
<p>3.接着切换到Refresh选项卡，给Refresh resources upon completion打上钩<br><img src="http://hi.csdn.net/attachment/201112/21/0_132444416374Ge.gif" alt=""><br>4.然后切换到Build Options选项卡，勾选上最后三项<br><img src="http://hi.csdn.net/attachment/201112/21/0_1324444176sQGE.gif" alt=""><br>5.之后点击Specify Resources按钮，选择资源目录，勾选你的项目目录即可<br><img src="http://hi.csdn.net/attachment/201112/21/0_1324444191ey9E.gif" alt=""><br>6.最后点击Finish，点击OK一路把刚才的配置都保存下来，注意：如果你配置的编译器在其它编译器下边，记得一定要点Up按钮，把它排到第一位，否则C代码的编译晚于Java代码的编译，会造成你的C代码要编译两次才能看到最新的修改</p>
<p><img src="http://hi.csdn.net/attachment/201112/21/0_1324444229KpRM.gif" alt=""><br>7.编译配置完成，现在来测试一下是否可以自动编译，打开项目jni目录里的hello-jni.c文件把提示Hello from JNI!改成其他的文字：如：Hello，Automatic Compile.，然后再模拟器中运行你的程序，如果模拟器中显示了你最新修改的文字，说明环境搭建完成！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/08/e5-a3-b0-e9-9f-b3-e5-8e-8b-e7-bc-a9-e5-ba-93-speex/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/08/e5-a3-b0-e9-9f-b3-e5-8e-8b-e7-bc-a9-e5-ba-93-speex/" itemprop="url">声音压缩库 Speex </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-08T03:31:49+08:00">
                2012-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/08/e5-a3-b0-e9-9f-b3-e5-8e-8b-e7-bc-a9-e5-ba-93-speex/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/08/e5-a3-b0-e9-9f-b3-e5-8e-8b-e7-bc-a9-e5-ba-93-speex/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://www.oschina.net/uploads/img/200906/18121058_90zB.png" alt=""></p>
<p>Speex是一套专门用于压缩声音的库,由于其专门针对声音,所以压缩声音的性能非常高.Speex由于其压缩性能,及0.80版后的跨平台的性能,所以在网络声音的传输中有很大的价值.但是需要注意的是speex只能对声音进行压缩,不支持音乐的压缩,如果你需要音乐的压缩你或许需要用vorbis库.</p>
<p>支持包括Linux、BSD、MacOS 以及 Symbian 系统。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/08/android/android-e5-bd-95-e5-88-b6-e5-a3-b0-e9-9f-b3-e5-bd-95-e9-9f-b3-e8-be-93-e8-be-93-e5-87-ba-e6-a0-bc-e5-bc-8f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/08/android/android-e5-bd-95-e5-88-b6-e5-a3-b0-e9-9f-b3-e5-bd-95-e9-9f-b3-e8-be-93-e8-be-93-e5-87-ba-e6-a0-bc-e5-bc-8f/" itemprop="url">Android录制声音 录音输输出格式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-08T03:24:41+08:00">
                2012-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/08/android/android-e5-bd-95-e5-88-b6-e5-a3-b0-e9-9f-b3-e5-bd-95-e9-9f-b3-e8-be-93-e8-be-93-e5-87-ba-e6-a0-bc-e5-bc-8f/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/08/android/android-e5-bd-95-e5-88-b6-e5-a3-b0-e9-9f-b3-e5-bd-95-e9-9f-b3-e8-be-93-e8-be-93-e5-87-ba-e6-a0-bc-e5-bc-8f/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Table 1.</strong> Core media format and codec support.</p>
<p>&nbsp;</p>
<table><br><tbody><br><tr><br><th>Type</th><br><th>Format / Codec</th><br><th>Encoder</th><br><th>Decoder</th><br><th>Details</th><br><th>Supported File Type(s) / Container Formats</th><br></tr><br><tr><br><td rowspan="10">Audio</td><br><td>AAC LC/LTP</td><br><td><big>•</big></td><br><td><big>•</big></td><br><td rowspan="3">Mono/Stereo content in any combination of standard bit rates up to 160 kbps and sampling rates from 8 to 48kHz</td><br><td rowspan="3">• 3GPP (.3gp)<br>• MPEG-4 (.mp4, .m4a)<br>• ADTS raw AAC (.aac, decode in Android 3.1+, encode in Android 4.0+, ADIF not supported)<br>• MPEG-TS (.ts, not seekable, Android 3.0+)</td><br></tr><br><tr><br><td>HE-AACv1 (AAC+)</td><br><td></td><br><td><big>•</big></td><br></tr><br><tr><br><td>HE-AACv2 (enhanced AAC+)</td><br><td></td><br><td><big>•</big></td><br></tr><br><tr><br><td>AMR-NB</td><br><td><big>•</big></td><br><td><big>•</big></td><br><td>4.75 to 12.2 kbps sampled @ 8kHz</td><br><td>  3GPP (.3gp)</td><br></tr><br><tr><br><td>AMR-WB</td><br><td><big>•</big></td><br><td><big>•</big></td><br><td>9 rates from 6.60 kbit/s to 23.85 kbit/s sampled @ 16kHz</td><br><td>  3GPP (.3gp)</td><br></tr><br><tr><br><td>FLAC</td><br><td></td><br><td nowrap="nowrap"><big>•</big><br><small>(Android 3.1+)</small></td><br><td>Mono/Stereo (no multichannel). Sample rates up to 48 kHz (but up to 44.1 kHz is recommended on devices with 44.1 kHz output, as the 48 to 44.1 kHz downsampler does not include a low-pass filter). 16-bit recommended; no dither applied for 24-bit.</td><br><td>  FLAC (.flac) only</td><br></tr><br><tr><br><td>MP3</td><br><td></td><br><td><big>•</big></td><br><td>Mono/Stereo 8-320Kbps constant (CBR) or variable bit-rate (VBR)</td><br><td>  MP3 (.mp3)</td><br></tr><br><tr><br><td>MIDI</td><br><td></td><br><td><big>•</big></td><br><td>MIDI Type 0 and 1. DLS Version 1 and 2. XMF and Mobile XMF. Support for ringtone formats RTTTL/RTX, OTA, and iMelody</td><br><td>• Type 0 and 1 (.mid, .xmf, .mxmf)<br>• RTTTL/RTX (.rtttl, .rtx)<br>• OTA (.ota)<br>• iMelody (.imy)</td><br></tr><br><tr><br><td>Vorbis</td><br><td></td><br><td><big>•</big></td><br><td></td><br><td>• Ogg (.ogg)<br>• Matroska (.mkv, Android 4.0+)</td><br></tr><br><tr><br><td>PCM/WAVE</td><br><td></td><br><td><big>•</big></td><br><td>8- and 16-bit linear PCM (rates up to limit of hardware)</td><br><td>  WAVE (.wav)</td><br></tr><br><tr><br><td rowspan="5">Image</td><br><td>JPEG</td><br><td><big>•</big></td><br><td><big>•</big></td><br><td>Base+progressive</td><br><td>  JPEG (.jpg)</td><br></tr><br><tr><br><td>GIF</td><br><td></td><br><td><big>•</big></td><br><td></td><br><td>GIF (.gif)</td><br></tr><br><tr><br><td>PNG</td><br><td><big>•</big></td><br><td><big>•</big></td><br><td></td><br><td>PNG (.png)</td><br></tr><br><tr><br><td>BMP</td><br><td></td><br><td><big>•</big></td><br><td></td><br><td>BMP (.bmp)</td><br></tr><br><tr><br><td>WEBP</td><br><td nowrap="nowrap"><big>•</big><br><small>(Android 4.0+)</small></td><br><td nowrap="nowrap"><big>•</big><br><small>(Android 4.0+)</small></td><br><td></td><br><td>  WebP (.webp)</td><br></tr><br><tr><br><td rowspan="4">Video</td><br><td>H.263</td><br><td><big>•</big></td><br><td><big>•</big></td><br><td></td><br><td>• 3GPP (.3gp)<br>• MPEG-4 (.mp4)</td><br></tr><br><tr><br><td>H.264 AVC</td><br><td nowrap="nowrap"><big>•</big><br><small>(Android 3.0+)</small></td><br><td nowrap="nowrap"><big>•</big></td><br><td>Baseline Profile (BP)</td><br><td>• 3GPP (.3gp)<br>• MPEG-4 (.mp4)<br>• MPEG-TS (.ts, AAC audio only, not seekable, Android 3.0+)</td><br></tr><br><tr><br><td>MPEG-4 SP</td><br><td></td><br><td><big>•</big></td><br><td></td><br><td>3GPP (.3gp)</td><br></tr><br><tr><br><td>VP8</td><br><td></td><br><td nowrap="nowrap"><big>•</big><br><small>(Android 2.3.3+)</small></td><br><td>Streamable only in Android 4.0 and above</td><br><td>• <a href="http://www.webmproject.org/" target="_blank" rel="external">WebM</a> (.webm)<br>• Matroska (.mkv, Android 4.0+)</td><br></tr><br></tbody><br></table>

<h2 id="Video-Encoding-Recommendations"><a href="#Video-Encoding-Recommendations" class="headerlink" title="Video Encoding Recommendations"></a>Video Encoding Recommendations</h2><p>Table 2, below, lists examples of video encoding profiles and parameters that the Android media framework supports for playback. In addition to these encoding parameter recommendations, a device’s available<em>video recording</em> profiles can be used as a proxy for media playback capabilities. These profiles can be inspected using the<code>[CamcorderProfile](http://blog.csdn.net/zqiang_55/reference/android/media/CamcorderProfile.html)</code> class, which is available since API level 8.</p>
<p><strong>Table 2.</strong> Examples of supported video encoding parameters.</p>
<p>&nbsp;</p>
<p><table></table></p>
<p><thead></thead></p>
<p><tr></tr></p>
<p><th></th></p>
<p><th><acronym title="Standard definition">SD (Low quality)</acronym></th></p>
<p><th><acronym title="Standard definition">SD (High quality)</acronym></th></p>
<p><th><acronym title="High definition">HD (Not available on all devices)</acronym></th><br><br></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><th>Video codec</th></p>
<p><td>H.264 Baseline Profile</td></p>
<p><td>H.264 Baseline Profile</td></p>
<p><td>H.264 Baseline Profile</td><br></p>
<p><tr></tr></p>
<p><th>Video resolution</th></p>
<p><td>176 x 144 px</td></p>
<p><td>480 x 360 px</td></p>
<p><td>1280 x 720 px</td><br></p>
<p><tr></tr></p>
<p><th>Video frame rate</th></p>
<p><td>12 fps</td></p>
<p><td>30 fps</td></p>
<p><td>30 fps</td><br></p>
<p><tr></tr></p>
<p><th>Video bitrate</th></p>
<p><td>56 Kbps</td></p>
<p><td>500 Kbps</td></p>
<p><td>2 Mbps</td><br></p>
<p><tr></tr></p>
<p><th>Audio codec</th></p>
<p><td>AAC-LC</td></p>
<p><td>AAC-LC</td></p>
<p><td>AAC-LC</td><br></p>
<p><tr></tr></p>
<p><th>Audio channels</th></p>
<p><td>1 (mono)</td></p>
<p><td>2 (stereo)</td></p>
<p><td>2 (stereo)</td><br></p>
<p><tr></tr></p>
<p><th>Audio bitrate</th></p>
<p><td>24 Kbps</td></p>
<p><td>128 Kbps</td></p>
<p><td>192 Kbps</td><br><br><br><br>For video content that is streamed over HTTP or RTSP, there are additional requirements:</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/08/android/android-e5-bc-80-e5-8f-91-e4-b8-ad-e7-bd-91-e7-bb-9c-e8-af-b7-e6-b1-82-e7-9a-84-e5-8e-8b-e7-bc-a9-e2-94-80-e2-94-80-gzip-e7-9a-84-e4-bd-bf-e7-94-a8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/08/android/android-e5-bc-80-e5-8f-91-e4-b8-ad-e7-bd-91-e7-bb-9c-e8-af-b7-e6-b1-82-e7-9a-84-e5-8e-8b-e7-bc-a9-e2-94-80-e2-94-80-gzip-e7-9a-84-e4-bd-bf-e7-94-a8/" itemprop="url">Android开发中网络请求的压缩 ── GZip的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-08T02:58:23+08:00">
                2012-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/08/android/android-e5-bc-80-e5-8f-91-e4-b8-ad-e7-bd-91-e7-bb-9c-e8-af-b7-e6-b1-82-e7-9a-84-e5-8e-8b-e7-bc-a9-e2-94-80-e2-94-80-gzip-e7-9a-84-e4-bd-bf-e7-94-a8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/08/android/android-e5-bc-80-e5-8f-91-e4-b8-ad-e7-bd-91-e7-bb-9c-e8-af-b7-e6-b1-82-e7-9a-84-e5-8e-8b-e7-bc-a9-e2-94-80-e2-94-80-gzip-e7-9a-84-e4-bd-bf-e7-94-a8/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>gzip是GNUzip的缩写，它是一个GNU自由软件的文件压缩程序。</p>
<p>HTTP协议上的GZIP编码是一种用来改进WEB应用程序性能的技术。一般服务器中都安装有这个功能模块的，服务器端不需做改动。</p>
<p>当浏览器支持gzip 格式的时候， 服务器端会传输gzip格式的数据。</p>
<p>从Http 技术细节上讲，就是 http request 头中 有 “Accept-Encoding”, “gzip” ，response 中就有返回头Content-Encoding=gzip 。</p>
<p>我们现在从浏览器上访问玩啥网站都是gzip格式传输的。</p>
<p>但是我们现在Android 客户端，没有用gzip 格式访问。</p>
<p>同样的的道理，我们可以在android 客户端 request 头中加入 “Accept-Encoding”, “gzip” ，来让服务器传送gzip 数据。</p>
<p>具体代码如下。<br>[code lang=”java”]<br>   private String getJsonStringFromGZIP(HttpResponse response) {<br>        String jsonString = null;<br>        try {<br>            InputStream is = response.getEntity().getContent();<br>            BufferedInputStream bis = new BufferedInputStream(is);<br>            bis.mark(2);<br>            // 取前两个字节<br>            byte[] header = new byte[2];<br>            int result = bis.read(header);<br>            // reset输入流到开始位置<br>            bis.reset();<br>            // 判断是否是GZIP格式<br>            int headerData = getShort(header);<br>            // Gzip 流 的前两个字节是 0x1f8b<br>            if (result != -1 &amp;&amp; headerData == 0x1f8b) { LogUtil.d(&quot;HttpTask&quot;, &quot; use GZIPInputStream  &quot;);<br>                is = new GZIPInputStream(bis);<br>            } else {<br>                LogUtil.d(&quot;HttpTask&quot;, &quot; not use GZIPInputStream&quot;);<br>                is = bis;<br>            }<br>            InputStreamReader reader = new InputStreamReader(is, &quot;utf-8&quot;);<br>            char[] data = new char[100];<br>            int readSize;<br>            StringBuffer sb = new StringBuffer();<br>            while ((readSize = reader.read(data)) &gt; 0) {<br>                sb.append(data, 0, readSize);<br>            }<br>            jsonString = sb.toString();<br>            bis.close();<br>            reader.close();<br>        } catch (Exception e) {<br>            LogUtil.e(&quot;HttpTask&quot;, e.toString(),e);<br>        }</p>
<pre><code>    LogUtil.d(&amp;quot;HttpTask&amp;quot;, &amp;quot;getJsonStringFromGZIP net output : &amp;quot; + jsonString );
    return jsonString;
}

private int getShort(byte[] data) {
    return (int)((data[0]&amp;lt;&amp;lt;8) | data[1]&amp;amp;0xFF);
}
</code></pre><p>[/code]<br>参考 ，注意实际使用中，我发现gzip 流前两个字节是0x1e8b ，不是0x1f8b .后来检查一下code ，代码处理错误，加上第二个字节的时候需 &amp;0xFF</p>
<p>0x1f8b 可参考标准 <a href="http://www.gzip.org/zlib/rfc-gzip.html#file-format" target="_blank" rel="external">http://www.gzip.org/zlib/rfc-gzip.html#file-format</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/08/e5-ae-89-e5-8d-93-e8-87-aa-e5-b8-a6-e7-9a-84-e4-b8-bb-e9-a2-98androidtheme/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/08/e5-ae-89-e5-8d-93-e8-87-aa-e5-b8-a6-e7-9a-84-e4-b8-bb-e9-a2-98androidtheme/" itemprop="url">安卓自带的主题android:theme</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-08T01:58:44+08:00">
                2012-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/08/e5-ae-89-e5-8d-93-e8-87-aa-e5-b8-a6-e7-9a-84-e4-b8-bb-e9-a2-98androidtheme/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/08/e5-ae-89-e5-8d-93-e8-87-aa-e5-b8-a6-e7-9a-84-e4-b8-bb-e9-a2-98androidtheme/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[code lang=”xml”]<br> android:theme=&quot;@android:style/Theme.Dialog&quot;   将一个Activity显示为能话框模式<br> android:theme=&quot;@android:style/Theme.NoTitleBar&quot;  不显示应用程序标题栏<br> android:theme=&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot;  不显示应用程序标题栏，并全屏<br> android:theme=&quot;Theme.Light&quot;  背景为白色<br> android:theme=&quot;Theme.Light.NoTitleBar&quot;  白色背景并无标题栏<br> android:theme=&quot;Theme.Light.NoTitleBar.Fullscreen&quot;  白色背景，无标题栏，全屏<br> android:theme=&quot;Theme.Black&quot;  背景黑色<br> android:theme=&quot;Theme.Black.NoTitleBar&quot;  黑色背景并无标题栏<br> android:theme=&quot;Theme.Black.NoTitleBar.Fullscreen&quot;    黑色背景，无标题栏，全屏<br> android:theme=&quot;Theme.Wallpaper&quot;  用系统桌面为应用程序背景<br> android:theme=&quot;Theme.Wallpaper.NoTitleBar&quot;  用系统桌面为应用程序背景，且无标题栏<br> android:theme=&quot;Theme.Wallpaper.NoTitleBar.Fullscreen&quot;  用系统桌面为应用程序背景，无标题栏，全屏<br> android:theme=&quot;Translucent&quot; 背景为透明<br> android:theme=&quot;Theme.Translucent.NoTitleBar&quot;  透明背景并无标题栏<br> android:theme=&quot;Theme.Translucent.NoTitleBar.Fullscreen&quot;  透明背景并无标题栏，全屏<br> android:theme=&quot;Theme.Panel&quot;  内容容器<br> android:theme=&quot;Theme.Light.Panel&quot; 背景为白色的内容容器<br>[/code] </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/08/android/android-ef-bc-9ainvalidate-e5-92-8cpostinvalidate-e7-9a-84-e5-8c-ba-e5-88-ab-e5-8f-8a-e4-bd-bf-e7-94-a8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/08/android/android-ef-bc-9ainvalidate-e5-92-8cpostinvalidate-e7-9a-84-e5-8c-ba-e5-88-ab-e5-8f-8a-e4-bd-bf-e7-94-a8/" itemprop="url">Android：invalidate()和postInvalidate() 的区别及使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-08T01:57:34+08:00">
                2012-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/08/android/android-ef-bc-9ainvalidate-e5-92-8cpostinvalidate-e7-9a-84-e5-8c-ba-e5-88-ab-e5-8f-8a-e4-bd-bf-e7-94-a8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/08/android/android-ef-bc-9ainvalidate-e5-92-8cpostinvalidate-e7-9a-84-e5-8c-ba-e5-88-ab-e5-8f-8a-e4-bd-bf-e7-94-a8/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Android提供了Invalidate方法实现界面刷新，但是Invalidate不能直接在线程中调用，因为他是违背了单线程模型：Android UI操作并不是线程安全的，并且这些操作必须在UI线程中调用。<br>invalidate()是用来刷新View的，必须是在UI线程中进行工作。比如在修改某个view的显示时，调用invalidate()才能看到重新绘制的界面。invalidate()的调用是把之前的旧的view从主UI线程队列中pop掉。 一个Android 程序默认情况下也只有一个进程，但一个进程下却可以有许多个线程。<br>在这么多线程当中，把主要是负责控制UI界面的显示、更新和控件交互的线程称为UI线程，由于onCreate()方法是由UI线程执行的，所以也可以把UI线程理解为主线程。其余的线程可以理解为工作者线程。<br>invalidate()得在UI线程中被调动，在工作者线程中可以通过Handler来通知UI线程进行界面更新。</p>
<p>而postInvalidate()在工作者线程中被调用</p>
<p>利用invalidate()刷新界面</p>
<p>　　实例化一个Handler对象，并重写handleMessage方法调用invalidate()实现界面刷新;而在线程中通过sendMessage发送界面更新消息。<br>[code lang=”java”]<br>// 在onCreate()中开启线程</p>
<p>new Thread(new GameThread()).start();、</p>
<p>// 实例化一个handler</p>
<p>Handler myHandler = new Handler() {<br>// 接收到消息后处理<br>public void handleMessage(Message msg) {<br>switch (msg.what) {<br>case Activity01.REFRESH:<br>mGameView.invalidate(); // 刷新界面<br>break;<br>}</p>
<p>super.handleMessage(msg);<br>}<br>};</p>
<p>class GameThread implements Runnable {<br>public void run() {<br>while (!Thread.currentThread().isInterrupted()) {<br>Message message = new Message();<br>message.what = Activity01.REFRESH;<br>// 发送消息<br>Activity01.this.myHandler.sendMessage(message);<br>try {<br>Thread.sleep(100);<br>} catch (InterruptedException e) {<br>Thread.currentThread().interrupt();<br>}<br>}<br>}<br>}</p>
<p>[/code]<br>使用postInvalidate()刷新界面</p>
<pre><code>使用postInvalidate则比较简单，不需要handler，直接在线程中调用postInvalidate即可。 
</code></pre><p>[code lang=”java”]<br>class GameThread implements Runnable {<br>public void run() {<br>while (!Thread.currentThread().isInterrupted()) {<br>try {<br>Thread.sleep(100);<br>} catch (InterruptedException e) {<br>Thread.currentThread().interrupt();<br>}</p>
<p>// 使用postInvalidate可以直接在线程中更新界面<br>mGameView.postInvalidate();<br>}<br>}<br>}<br>[/code] </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/08/android/android-e5-8e-8b-e7-bc-a9-e5-9b-be-e7-89-87-e7-9a-84-e5-87-a0-e7-a7-8d-e6-96-b9-e6-b3-95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/08/android/android-e5-8e-8b-e7-bc-a9-e5-9b-be-e7-89-87-e7-9a-84-e5-87-a0-e7-a7-8d-e6-96-b9-e6-b3-95/" itemprop="url">Android压缩图片的几种方法和实例demo</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-08T01:49:11+08:00">
                2012-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/08/android/android-e5-8e-8b-e7-bc-a9-e5-9b-be-e7-89-87-e7-9a-84-e5-87-a0-e7-a7-8d-e6-96-b9-e6-b3-95/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/08/android/android-e5-8e-8b-e7-bc-a9-e5-9b-be-e7-89-87-e7-9a-84-e5-87-a0-e7-a7-8d-e6-96-b9-e6-b3-95/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在移动设备上进行图片相关软件的开发，一定得先压缩图片，毕竟移动设备的内存有限，稍不注意就会导致内存溢出，刚好用到这里，就学习了一下相关的压缩图片，现在总结出来和大家共享。</p>
<p><wbr> <wbr> <wbr> <wbr> 一般情况下，我们要将图片按照固定大小取缩略图，一般取缩略图的方法是使用 BitmapFactory的decodeFile方法，然后通过传递进去 BitmapFactory.Option类型的参数进行取缩略图，在Option中，属性值inSampleSize表示缩略图大小为原始图片大小的几分之一，即如果这个值为2，则取出的缩略图的宽和高都是原始图片的1/2，图片大小就为原始大小的1/4。 Options中有个属性inJustDecodeBounds，SDK中的英文引用如下：<br>If set totrue, the decoder will return null (no bitmap), but the out… fields will stillbe set, allowing the caller to query the bitmap without having to allocate thememory for its pixels.<br>大致意思就是说如果该值设为true那么将不返回实际的bitmap不给其分配内存空间而里面只包括一些解码边界信息即图片大小信息，那么相应的方法也就出来了，通过设置inJustDecodeBounds为true，获取到outHeight(图片原始高度)和 outWidth(图片的原始宽度)，然后计算一个inSampleSize(缩放值)，然后就可以取图片了，这里要注意的是，inSampleSize 可能小于0，必须做判断。</p>
<p><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>  <wbr>BitmapFactory.Options options = new BitmapFactory.Options();<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> options.inJustDecodeBounds = true;<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>pic[i] <wbr> = BitmapFactory.decodeFile(path[i], options); //此时返回bm为空<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>options.inJustDecodeBounds = false;<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> //缩放比<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> int be = (int)(options.outHeight / (float)215);<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> if (be &lt;= 0)<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> be = 1;<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> options.inSampleSize = be;<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>options.inSampleSize = computeSampleSize(options, -1, 300*350); <wbr><br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>  <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> //重新读入图片，注意这次要把options.inJustDecodeBounds 设为 false哦<br><wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>pic[i] <wbr> = BitmapFactory.decodeFile(path[i], options);</p>
<p>这是option的UML图：</p>
<p><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=7f311ef501017zhs&amp;url=http://s4.sinaimg.cn/orignal/7f311ef5gc8b3e16c3f33" target="_blank" rel="external"><img src="http://s4.sinaimg.cn/middle/7f311ef5gc8b3e16c3f33&amp;690" alt="Android压缩图片的几种方法" title="Android压缩图片的几种方法"></a><br><wbr>  <wbr>  <wbr>  <wbr>  <wbr>  <wbr></p>
<p>这样出来的图片一般不会失真，但是当你压缩的长宽比例相差较大时还会有失真现象。</p>
<p>这个是等比例缩放:<br>bitmap = Bitmap.createScaledBitmap(bitmap, width, height, false);width和height是缩放后的大小，true表示过滤，可消除锯齿感。</p>
<p><span style="color: #000000; font-family: 'Times New Roman'; font-size: small;">newBitmap = Bitmap.createBitmap(oldBitmap, 0, 0, width, height, matrix, true);//用距阵的方式缩放</span></p>
<p>这个是截取图片某部分:<br>bitmap = Bitmap.createBitmap(bitmap, x, y, width, height);，意思是从（x，y）开始截取width宽和height高大小的图片。</p>
<p>这些就是android系统中压缩图片的几个方法了。</p>
<p>&nbsp;</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>&nbsp;<br>[code lang=”java”]<br>//对图片进行压缩<br>           BitmapFactory.Options options = new BitmapFactory.Options();<br>           options.inJustDecodeBounds = true;  </p>
<pre><code>   //获取这个图片的宽和高  
   Bitmap bitmap = BitmapFactory.decodeFile(&amp;quot;/sdcard/dcim/Camera/hello.jpg&amp;quot;,options);//此时返回bm为空  
   options.inJustDecodeBounds =false;  
   //计算缩放比  
   int be = (int)(options.outHeight / (float)200);  
   if(be &amp;lt;= 0)  
        be =1;  
   options.inSampleSize =be;  
   //重新读入图片，注意这次要把options.inJustDecodeBounds设为false哦  
   bitmap = BitmapFactory.decodeFile(&amp;quot;/sdcard/dcim/Camera/hello.jpg&amp;quot;,options);  
   int w = bitmap.getWidth();  
   int h=bitmap.getHeight();  
   System.out.println(w+&amp;quot; &amp;quot;+h);  
   myImageView.setImageBitmap(bitmap);  

   //保存入sdCard  
   File file2= new File(&amp;quot;/sdcard/dcim/Camera/test.jpg&amp;quot;);  
   try {  
    FileOutputStream out = new FileOutputStream(file2);  
    if(bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out)){  
        out.flush();  
        out.close();  
    }  
} catch (Exception e) {  
    // TODO: handle exception  
}  

//读取sd卡  
   File file =new File(&amp;quot;/sdcard/dcim/Camera/test.jpg&amp;quot;);  
   int maxBufferSize = 16 * 1024;  

    int len = 0;  
    ByteArrayOutputStream outStream = new ByteArrayOutputStream();  
     BufferedInputStream bufferedInputStream;  
    try {  
        bufferedInputStream = new BufferedInputStream(new FileInputStream(file));  
        int bytesAvailable = bufferedInputStream.available();  
        int bufferSize = Math.min(bytesAvailable, maxBufferSize);  
        byte[] buffer = new byte[bufferSize];  
        while ((len = bufferedInputStream.read(buffer)) != -1)  
        {  
            outStream.write(buffer, 0, bufferSize);  
        }  
         data = outStream.toByteArray();  
        outStream.close();  
        bufferedInputStream.close();  

    } catch (FileNotFoundException e) {  
        e.printStackTrace();  
    } catch (IOException e) {  
        e.printStackTrace();  
    }  
</code></pre><p>[/code] </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/07/codecademy-linux-e7-89-88-e8-af-9e-e7-94-9f-ef-bc-8c-e5-9b-bd-e5-86-85it-e5-9f-b9-e8-ae-ad-e5-b8-88-e6-8e-a8-e5-87-balinux-e5-85-8d-e8-b4-b9-e5-9c-a8-e7-ba-bf-e8-a7-86-e9-a2-91-e5-ad-a6-e4-b9-a0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/07/codecademy-linux-e7-89-88-e8-af-9e-e7-94-9f-ef-bc-8c-e5-9b-bd-e5-86-85it-e5-9f-b9-e8-ae-ad-e5-b8-88-e6-8e-a8-e5-87-balinux-e5-85-8d-e8-b4-b9-e5-9c-a8-e7-ba-bf-e8-a7-86-e9-a2-91-e5-ad-a6-e4-b9-a0/" itemprop="url">Codecademy Linux版诞生，国内IT培训师推出Linux免费在线视频学习及问答网站</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-07T02:16:51+08:00">
                2012-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/07/codecademy-linux-e7-89-88-e8-af-9e-e7-94-9f-ef-bc-8c-e5-9b-bd-e5-86-85it-e5-9f-b9-e8-ae-ad-e5-b8-88-e6-8e-a8-e5-87-balinux-e5-85-8d-e8-b4-b9-e5-9c-a8-e7-ba-bf-e8-a7-86-e9-a2-91-e5-ad-a6-e4-b9-a0/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/07/codecademy-linux-e7-89-88-e8-af-9e-e7-94-9f-ef-bc-8c-e5-9b-bd-e5-86-85it-e5-9f-b9-e8-ae-ad-e5-b8-88-e6-8e-a8-e5-87-balinux-e5-85-8d-e8-b4-b9-e5-9c-a8-e7-ba-bf-e8-a7-86-e9-a2-91-e5-ad-a6-e4-b9-a0/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://img01.36krcnd.com/wp-content/uploads/2012/11/Lin.jpg" target="_blank" rel="external"><img src="http://img02.36krcnd.com/wp-content/uploads/2012/11/Lin.jpg" alt="" title="Lin"></a></p>
<p>试想这样一幅场景，你可以在地铁上啃注册会计师，在公交车上学Linux，在排队的间歇学学法律，是不是很美？而随着移动互联网的发展和各类在线教育平台的崛起，这个场景正在逐渐变成现实。在国内的各类在线教育平台相继推出的热潮中，十月底，又一家垂直领域的在线教育平台<a href="http://www.linuxcast.net/" target="_blank" rel="external">LinuxCast</a>诞生了——这家网站由国内的一名兼具线下培训经验及线上系统运维、开发经验的创业者推出，聚焦Linux在线视频教育，堪称国内的Linux版Codecademy。</p>
<p><a href="http://img03.36krcnd.com/wp-content/uploads/2012/11/Lin3.jpg" target="_blank" rel="external"><img src="http://img04.36krcnd.com/wp-content/uploads/2012/11/Lin3.jpg" alt="" title="Lin3"></a></p>
<p>LinuxCast的功能目前主要分为三块：以Linux视频教程主打的课程库，围绕IT技术各类话题的课程播客，以及围绕课程学习的问答社区。打开网站后，你需要根据自己的需求和对Linux的熟悉程度选择相应级别的课程（目前包括入门基础、系统服务、认证考试和高级管理四类），选好之后（比如入门基础）就可以学习该级别的所有课程了。目前，每个课程视频都包含了简单的课程介绍、你在课程中能学到什么、有多少人在学习这类信息，点击即可观看视频。而在你的个人页面，你也可以看到自己选择的课程数量，提出的问题、获得的成就，以及不同级别的课程完成进度。</p>
<p>另外，网站的IT视频博客会每日更新，问答社区则模仿了stackoverflow风格，突显内容，并会对内容进行一定的过滤。尽管网站的视频是录播的，但你在观看视频的时候可以提问，这个提问会关联到网站的问答社区。除此之外，团队现在还在开发一个在线实验平台，这个实验平台可以为用户提供几十到上百个虚拟主机，让用户测试自己的项目，进一步打通学习链条。</p>
<p><a href="http://img05.36krcnd.com/wp-content/uploads/2012/11/31.jpg" target="_blank" rel="external"><img src="http://img01.36krcnd.com/wp-content/uploads/2012/11/31.jpg" alt="" title="3"></a></p>
<p>在国外，像这样的现在编程学习平台就包括上面提到的趣味编程网站<a href="http://www.36kr.com/?s=Codeacademy" target="_blank" rel="external">Codecademy</a>和<a href="http://www.36kr.com/p/101226.html" target="_blank" rel="external">Treehouse</a>。Codecademy在今年六月份刚刚获得一轮1000万美元的融资，并新增了中文、俄语、日语、西班牙语和德语5个语言版本，不过目前针对的都是开发而非运维，也没有Linux相关的课程。而Treehouse也在今年的四月份拿到475万美元的融资。在国内，泛类的在线教育平台就包括传课、多贝等。不过，国内专注于Linux视频教学的在线学习网站似乎还没有，而线上已有的Linux资料多为文字类，生硬晦涩，为数不多的Linux视频也多是培训机构放出的宣传性视频，或是国外英文版，缺少成套的、体系化的课程。</p>
<p>而说到为什么要做这么一个网站，除了上面的原因外，网站创始人苏勇称，这更多地是基于他自己之前在线下做IT培训的经验。他做过一个线下的IT培训机构，尽管这个培训机构也能赚到钱，但却存在两个明显的弊端：超高的场地成本和讲师成本，除了对培训机构本身不利以外，这部分成本也会转嫁到学生的学费上来。苏勇自己评价说，做线下培训，投入产出比太低。</p>
<p>但是，线上平台却给人更多的想象力。线上的视频可以重复录放、从线上扩展到全国，不仅课程传授的成本降低了，学生学习的费用也更低。另外，苏勇说，对那些在职人员来说，线上的教育平台还有线下机构给不了的时间灵活度。</p>
<p>尽管LinuxCast在上月28号刚刚上线，但是从界面上可以看到，它的Linux基本操作课程已经有656人在学习，而单个IT播客的视频点播次数通常也在一两百次。对于一个上线不到十天的网站，这个数据已经相当不错。</p>
<p>目前，网站上的课程都是苏勇一个人录制的，这不禁让人联想到早期的<a href="http://www.36kr.com/p/89938.html" target="_blank" rel="external">可汗学院</a>。不过，苏勇本人在互联网行业做了很多年。最初是做开发，编写过国内第一套NDS开发教程，之后又转行做过网络、服务器运维，再之后在IT培训做了三年。他拿过红帽的RHCA、RHCE认证，以及思科的CCIE、CCSP认证。可以说，苏勇是一个既有培训经验、又有互联网基因的创业者。另外，他花了半年时间学习ruby on rails，才有了现在的这个网站。</p>
<p>而说到网站的盈利模式，苏勇称目前还在逐渐摸索。现阶段，网站的所有课程都是免费的，但是苏勇称当课程数量和用户基数足够大时，应该会将20%到30%的高端课程做成订阅付费制。订阅用户除了可以享受无限制的课程学习以外，还可以享受网站的人工问答服务。他可能会请一部分的兼职讲师，在固定时段给学生答疑。而这部分的费用，比起在线下做培训机构聘请讲师，还是要低很多。总归，他希望能将网站的服务做上来，而不单单是做课程。而他们最终开发出的在线实验平台，未来也可能对测试项目的用户实行按小时收费。但对于收费标准的设计，他也有自己的担心——因为国内的用户习惯还没有建立。对他来说，如何让用户不为那些实际不需花钱的服务付费，然后又为那些实际应该花钱的服务付费，也是他思考的问题。</p>
<p>因为网站刚刚上线，苏勇目前还没有进行大规模的推广，想先进一步完善网站的功能。他只是在上线头两天在v2ex和ruby-china两个网站发了两个帖子。结果，在那两天，网站的PV已经过万，独立访客也达到两千人。苏勇说，他现在想做的，并非是像之前创业那样，给一大批用户发上无数封邮件，而是直接锁定目标客户，并引导用户去分享他们的产品。因为，从之前的反馈来看，用户认可他们的产品。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://quanke.name/2012/11/07/android/android-e7-bc-96-e7-a8-8b-e5-ae-b9-e6-98-93-e7-8a-af-e7-9a-84-e9-94-99-e8-af-af/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="全科">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全科-不安分的码农">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/07/android/android-e7-bc-96-e7-a8-8b-e5-ae-b9-e6-98-93-e7-8a-af-e7-9a-84-e9-94-99-e8-af-af/" itemprop="url">Android编程容易犯的错误</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-11-07T02:12:24+08:00">
                2012-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android开发/" itemprop="url" rel="index">
                    <span itemprop="name">android开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2012/11/07/android/android-e7-bc-96-e7-a8-8b-e5-ae-b9-e6-98-93-e7-8a-af-e7-9a-84-e9-94-99-e8-af-af/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/11/07/android/android-e7-bc-96-e7-a8-8b-e5-ae-b9-e6-98-93-e7-8a-af-e7-9a-84-e9-94-99-e8-af-af/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.设置TextView的文本颜色<br>[code lang=”java”]<br>TextView tv;<br>…<br>tv.setTextColor(R.color.white);<br>[/code]<br>其实这样设置的颜色是 R.color.white的资源ID值所代表的颜色值，而不是资源color下的white颜色值：正确的做法如下：</p>
<p>[code lang=”java”]<br>tv.setTextColor(getResources().getColor(R.color.white));<br>[/code]<br>这个出错的概率满高的，就是因为二者都是int类，导致编译器不报错。</p>
<p>2.读取Cursor中的值</p>
<p>[code lang=”java”]<br>Uri uri;<br>Cursor cursor = contentResolver.query(uri, null,null,null,null);<br>if(cursor !=null){<br>    String name = cursor.getString(1);//<br>    curosr.close();<br>    cursor =null;<br>}<br>[/code]</p>
<p>上面语句中的，执行到cursor.getString(1)部分就会报异常，异常是: Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 4</p>
<p>编译没有问题，只有在运行的时候才会发现。</p>
<p>正确的做法是：</p>
<p>[code lang=”java”]<br>Uri uri;<br>Cursor cursor = contentResolver.query(uri, null,null,null,null);<br>if(cursor !=null){<br>    if(cursor.moveToFirst()){<br>        String name = cursor.getString(1);//<br>    }<br>    curosr.close();<br>    cursor =null;<br>}<br>[/code]<br>或者:</p>
<p>[code lang=”java”]<br>Uri uri;<br>Cursor cursor = contentResolver.query(uri, null,null,null,null);<br>if(cursor !=null){<br>    while(cursor.moveToNext()){<br>        String name = cursor.getString(1);//<br>    }<br>    curosr.close();<br>    cursor =null;<br>}<br>[/code]<br>3.不要使用标有Deprecated的函数或者类,比如不要使用android.telephony.gsm.SmsMessage，而应该用android.telephony.SmsMessage,这样避免采用不同的3G协议时不会出现问题。</p>
<p>4.SQLite中的查询条件，比如一个叫name的字段，其字段类型为TEXT,如果我们要判断其name不等某个值(如zhangsan),写出如下的语句:</p>
<p>[code lang=”java”]<br>name &lt;&gt; ‘zhangsan’<br>[/code]<br>但是，这样写的语句，如果碰到name值为空的时候，就有问题，即name为空时 以上的布尔值为false，而不是true.</p>
<p>原因很可能，SQLite中的判断函数采用类似写法:</p>
<p>[code lang=”java”]<br>boolean judge(String self, String conditions){<br>    if(null == self) return false;<br>    return self.equalsIgnoreCase(conditions);<br>}<br>[/code]<br>其中 self为数据库中name的值，而conditions为上面示例中的 zhangsan。</p>
<p>所以，以上查询条件的正确写法是:</p>
<p>[code lang=”java”]<br>name &lt;&gt; ‘zhangsan’ or name is null<br>[/code]<br>除非你也想过滤掉name 为空的记录。</p>
<p>5.如下所示，想要在按钮显示”删 除”（没错删除中间有个空格）,以下的字符串资源是错误的：</p>
<p>[code lang=”java”]<br>&lt;string name=&quot;button_delete_text&quot;&gt;删 除&lt;/string&gt;<br>[/code]<br>这样的出来，最终看不到中间的空格，应该是Android SDK编译的时候，会自动过滤掉String中的空格部分，所以应该采用以下的方式:</p>
<p>[code lang=”java”]<br>&lt;string name=&quot;button_delete_text&quot;&gt;删\u0020除&lt;/string&gt;<br>[/code]<br>类似地，其他的特殊符号都可以用\u00XX来转义，如 ‘ —- \u0027,  &lt; —– \u003C, &gt; —- \u003E 。</p>
<p>6. context的问题:</p>
<p>如果在一个非Activity的context里面调用startActivity，那么其intent必须设置：</p>
<p>[code lang=”java”]<br>intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);<br>[/code]<br> 否则，会报如下类似的错误：</p>
<p>[code lang=”java”]<br>Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag.<br>[/code]<br> 而我们还要提防系统控件中的隐性调用startActivity:</p>
<p>[code lang=”java”]<br>TextView tv = new TextView(mContext);<br>tv.setAutoLinkMask(Linkify.ALL);<br>tv.setText(content);<br>[/code]<br>当content内容中有电话号码/邮件/URL时，并且mContext不是非Acitvity的context，而是app的context时<br>[code lang=”java”]<br>(XXXActivity.this.getApplicationContext()),<br>[/code]<br>就会出现如下的错误：<br>[code lang=”java”]<br>android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity<br>context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?<br>E/AndroidRuntime(10382):     at android.app.ContextImpl.startActivity(ContextImpl.java:622)<br>E/AndroidRuntime(10382):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)<br>E/AndroidRuntime(10382):     at android.text.style.URLSpan.onClick(URLSpan.java:62)<br>[/code]<br>由于URLSpan.onClick中调用startActivity是由系统控制的，所以我们必须传入activity的contex,才不会出现如上的异常，导致程序退出。</p>
<p>7. 另外一个context的问题：如果你在一个单实例的对象中，有个注册监听器的行为的话，那么传给这个单实例</p>
<p>对象的context，就必须是ApplicationContext了，否则会出现:receiver leak的错误。</p>
<p>8. 控件有时不能充满整个屏幕:</p>
<p>[code lang=”java”]<br>LinearLayout panel = new LinearLayout(this);<br>LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(<br>        LinearLayout.LayoutParams.FILL_PARENT,<br>        LinearLayout.LayoutParams.FILL_PARENT);<br>panel.setLayoutParams(llp);<br>root.addView(panel);<br>[/code]<br> 而应该是：</p>
<p>[code lang=”java”]<br>LinearLayout panel = new LinearLayout(this);<br>LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(<br>        LinearLayout.LayoutParams.FILL_PARENT,<br>        LinearLayout.LayoutParams.FILL_PARENT);<br>root.addView(panel. llp);<br>[/code]<br>9.按照以下的方式启动service，但是service没有起来<br>[code lang=”java”]<br>     Intent service = new Intent(this, FuncService.class);<br>     startService(service);<br>[/code]<br>很有可能是忘了在AndroidManifest.xml中注册FuncService<br>[code lang=”xml”]<br>&lt;service android:name=&quot;com.android.example.FuncService&quot;/&gt;<br>[/code]<br> 10.TextView中为什么会在有些行尾出现”…”字符,当然不是所有手机都是有问题，本来笔者刚开始也以为可能是</p>
<p>手机的ROM问题,认真review了代码，发现如下的代码：<br>[code lang=”java”]<br>        mIntroView = (TextView) findViewById(R.id.description);<br>        mIntroView.setEllipsize(TruncateAt.END);<br>[/code]<br>问题是上面的第2行，之前是因为要限定文本的行数，后来去掉限制，没有去掉以上的代码。</p>
<p>该行代码会导致很多的ROM上：只要一个文本行的文字在一个手机屏幕行显示不下的话，就自动在</p>
<p>行尾截断并在行尾添加”…”,而之前没有问题是因为：全部显示的时候，我调用了如下方法：<br>[code lang=”java”]<br>mIntro.setMaxLines(Integer.MAX_VALUE);<br>[/code]<br> 11.不要太相信工具，比如Eclipse里面的断点遇到多线程什么，经常不起作用/走不到，这时候别太早下结论断点地方出错了，</p>
<p>所以每个工程都应该有日志的开关，通过查看日志来确认，某个路径是否走到或者某个变量的值，。。。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/dog.jpg"
                alt="全科" />
            
              <p class="site-author-name" itemprop="name">全科</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">116</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">41</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/quanke" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">全科</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"quanke"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  















<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>



  





  

  

  

  
  

  

  

  

</body>
</html>
